<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Styled Layout</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
</head>
<body>
    <!-- ÌîÑÎ°úÌïÑ ÏÑπÏÖò -->
    <div class="profile-section">
        <div class="profile-badge">5</div>
        <span>My Profile</span>
    </div>

    <!-- Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà -->
    <div class="container">
        <!-- ÌÉÄÏù¥ÌãÄ -->
        <div class="title">Title</div>

        <!-- ÏûÖÎ†• ÏÑπÏÖò -->
        <div class="input-wrapper">
            <!-- ÌÖçÏä§Ìä∏ ÏûÖÎ†•ÎûÄ -->
            <textarea 
                class="input-box" 
                placeholder="ÏùºÏ†ïÏùÑ ÎßåÎì§Í±∞ÎÇò Ïû•ÏÜåÎ•º Í≤ÄÏÉâÌï¥ Î≥¥ÏÑ∏Ïöî"
                rows="2"
            ></textarea>
            <!-- Í≤ÄÏùÄÏÉâ Î≤ÑÌäº -->
            <button class="send-button" onclick="goToEnterPage()">üîç</button>
        </div>
    </div>

    <script>
        function goToEnterPage() {
            const inputBox = document.querySelector('.input-box');
            const userInput = inputBox.value.trim();

            if (userInput === "") {
                alert("ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî!");
                return;
            }

            // ÏûÖÎ†• Îç∞Ïù¥ÌÑ∞Î•º localStorageÏóê Ï†ÄÏû•
            localStorage.setItem('chatMessage', userInput);

            // SPA ÌéòÏù¥ÏßÄÎ°ú Ïù¥Îèô
            window.location.href = "/app/";
        }

        // ÏûÖÎ†•Ï∞Ω ÏûêÎèô ÎÜíÏù¥ Ï°∞Ï†ï Î∞è Î≤ÑÌäº ÏúÑÏπò Ïú†ÏßÄ
        document.querySelector('.input-box').addEventListener('input', function () {
            this.style.height = "auto";
            const scrollHeight = this.scrollHeight;
            const maxHeight = 120; // 6Ï§Ñ ÎÜíÏù¥ Ï†úÌïú
            this.style.height = `${Math.min(scrollHeight, maxHeight)}px`;

            if (scrollHeight > maxHeight) {
                this.style.overflowY = "scroll";
            } else {
                this.style.overflowY = "hidden";
            }
        });

        // Enter Î∞è Shift+Enter Ï≤òÎ¶¨
        document.querySelector('.input-box').addEventListener('keydown', function (e) {
            if (e.key === "Enter" && e.shiftKey) {
                e.preventDefault();
                const cursorPosition = this.selectionStart;
                this.value = this.value.slice(0, cursorPosition) + "\n" + this.value.slice(cursorPosition);
            } else if (e.key === "Enter") {
                e.preventDefault();
                document.querySelector('.send-button').click();
            }
        });
    </script>
</body>
</html>
